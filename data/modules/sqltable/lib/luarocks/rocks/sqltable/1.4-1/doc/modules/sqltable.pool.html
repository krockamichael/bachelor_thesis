<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>SqlTable API Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>sqltable</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/sqltable.html">sqltable</a></li>
  <li><a href="../modules/sqltable.env.html">sqltable.env</a></li>
  <li><strong>sqltable.pool</strong></li>
  <li><a href="../modules/sqltable.table.html">sqltable.table</a></li>
  <li><a href="../modules/sqltable.connection.html">sqltable.connection</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>sqltable.pool</code></h1>
<p>A connection pooling object.</p>
<p>
<p> This allows for lots of tables to be opened with only
 as many connections as are needed to be created. Also,
 it provides for some level of fault tolerance: stale connections
 are automatically purged.
</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#_pool.type">_pool.type (pool)</a></td>
	<td class="summary">Return the type of database this pool connects to.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_pool.get">_pool.get (pool)</a></td>
	<td class="summary">Checkout a connection from the pool for use.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_pool.put">_pool.put (pool, connection)</a></td>
	<td class="summary">Return a connection to the pool.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_pool.connections">_pool.connections (pool)</a></td>
	<td class="summary">Returns a count of the total number of connections this
 pool has open.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_pool.outstanding">_pool.outstanding (pool)</a></td>
	<td class="summary">Returns a count of connections that exist, but are in use
 and not waiting in the pool.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_pool.close">_pool.close (pool)</a></td>
	<td class="summary">Shuts down the pool.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_pool.reset">_pool.reset (pool)</a></td>
	<td class="summary">Resets a pool by closing all connections, then reconnecting
 with just one.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_pool.setup_hook">_pool.setup_hook (pool, fcn)</a></td>
	<td class="summary">Sets a 'setup hook' that will be called every time a new
 connection is opened.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_pool.connect">_pool.connect (params)</a></td>
	<td class="summary">"Connect" to a database.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "_pool.type"></a>
    <strong>_pool.type (pool)</strong>
    </dt>
    <dd>
    Return the type of database this pool connects to.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pool</span>
         Pool to checked
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Database type of pool
    </ol>




</dd>
    <dt>
    <a name = "_pool.get"></a>
    <strong>_pool.get (pool)</strong>
    </dt>
    <dd>
    Checkout a connection from the pool for use.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pool</span>
         Pool to retrieve connection from
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A usable LuaDBI connection
    </ol>




</dd>
    <dt>
    <a name = "_pool.put"></a>
    <strong>_pool.put (pool, connection)</strong>
    </dt>
    <dd>
    Return a connection to the pool.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pool</span>
         Pool receiving connection
        </li>
        <li><span class="parameter">connection</span>
         Connection to be returned
        </li>
    </ul>





</dd>
    <dt>
    <a name = "_pool.connections"></a>
    <strong>_pool.connections (pool)</strong>
    </dt>
    <dd>
    Returns a count of the total number of connections this
 pool has open.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pool</span>
         Pool to check
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Total number of connections in pool
    </ol>




</dd>
    <dt>
    <a name = "_pool.outstanding"></a>
    <strong>_pool.outstanding (pool)</strong>
    </dt>
    <dd>
    Returns a count of connections that exist, but are in use
 and not waiting in the pool.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pool</span>
         Pool to check
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Number of outstanding connections in pool
    </ol>




</dd>
    <dt>
    <a name = "_pool.close"></a>
    <strong>_pool.close (pool)</strong>
    </dt>
    <dd>
    Shuts down the pool.
<p> THIS EXPLODES BADLY if there are outstanding connections not
 yet returned. Stop all queries before calling it!



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pool</span>
         Pool to close
        </li>
    </ul>





</dd>
    <dt>
    <a name = "_pool.reset"></a>
    <strong>_pool.reset (pool)</strong>
    </dt>
    <dd>
    Resets a pool by closing all connections, then reconnecting
 with just one.  This is handy if your program forks and/or you
 want to recycle all file handles.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pool</span>
         Pool to reset
        </li>
    </ul>





</dd>
    <dt>
    <a name = "_pool.setup_hook"></a>
    <strong>_pool.setup_hook (pool, fcn)</strong>
    </dt>
    <dd>
    Sets a 'setup hook' that will be called every time a new
 connection is opened.
<p> The pool will be reset once a hook is set, thus closing all
 open connections and reconnecting.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pool</span>
         this pool object
        </li>
        <li><span class="parameter">fcn</span>
         Setup hook to call
        </li>
    </ul>





</dd>
    <dt>
    <a name = "_pool.connect"></a>
    <strong>_pool.connect (params)</strong>
    </dt>
    <dd>
    "Connect" to a database.  This opens the first connection to
 a database to ensure the settings are correct, then returns
 a pool object containing one connection.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">params</span>

        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2017-11-07 20:58:40 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
